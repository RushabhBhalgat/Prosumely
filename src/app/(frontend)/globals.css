@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  .line-clamp-3 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 3;
    line-clamp: 3;
  }

  .line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
    line-clamp: 2;
  }

  .animate-fade-in-up {
    animation: fade-in-up 0.6s ease-out forwards;
  }

  .animation-delay-200 {
    animation-delay: 200ms;
  }

  .animation-delay-400 {
    animation-delay: 400ms;
  }

  .animation-delay-600 {
    animation-delay: 600ms;
  }

  .animation-delay-75 {
    animation-delay: 75ms;
  }

  .animation-delay-100 {
    animation-delay: 100ms;
  }

  /* Smooth scrollbar */
  .scrollbar-thin {
    scrollbar-width: thin;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: rgb(203 213 225); /* slate-300 */
    border-radius: 3px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: rgb(148 163 184); /* slate-400 */
  }

  /* Force sticky positioning */
  .toc-sticky {
    position: -webkit-sticky;
    position: sticky;
    top: 6rem;
    z-index: 30;
  }

  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

@layer base {
  :root {
    --text: rgb(31 41 55); /* gray-800 for better readability */
  }

  /* Smooth scroll behavior */
  html {
    scroll-behavior: smooth;
    scroll-padding-top: 5rem; /* Account for sticky header */
  }

  /* Sticky positioning support */
  .sticky-toc {
    position: -webkit-sticky;
    position: sticky;
    top: 5rem;
    z-index: 30;
  }

  /* Ensure all text in articles has proper color */
  .payload-richtext {
    color: rgb(31 41 55); /* gray-800 */
  }

  .payload-richtext p {
    color: rgb(31 41 55); /* gray-800 */
  }

  .payload-richtext h1,
  .payload-richtext h2,
  .payload-richtext h3,
  .payload-richtext h4,
  .payload-richtext h5,
  .payload-richtext h6 {
    color: rgb(0 0 0) !important; /* black for maximum contrast */
    font-weight: 700 !important;
  }

  .payload-richtext li {
    color: rgb(31 41 55); /* gray-800 */
  }

  /* Fix bold text visibility */
  .payload-richtext strong,
  .payload-richtext b {
    color: rgb(17 24 39) !important; /* gray-900 - darker for emphasis */
    font-weight: 700 !important;
  }

  /* Fix italic text visibility */
  .payload-richtext em,
  .payload-richtext i {
    color: rgb(31 41 55) !important; /* gray-800 */
    font-style: italic !important;
  }

  /* Fix underlined text visibility */
  .payload-richtext u {
    color: rgb(31 41 55) !important; /* gray-800 */
    text-decoration: underline !important;
  }

  /* Fix link text visibility */
  .payload-richtext a {
    color: rgb(37 99 235) !important; /* blue-600 */
    text-decoration: underline;
  }

  .payload-richtext a:hover {
    color: rgb(29 78 216) !important; /* blue-700 */
  }

  /* Fix code text visibility */
  .payload-richtext code {
    color: rgb(239 68 68) !important; /* red-500 */
    background-color: rgb(243 244 246); /* gray-100 */
    padding: 0.125rem 0.25rem;
    border-radius: 0.25rem;
    font-size: 0.875em;
  }

  /* Fix blockquote text visibility */
  .payload-richtext blockquote {
    color: rgb(75 85 99) !important; /* gray-600 */
    border-left: 4px solid rgb(209 213 219); /* gray-300 */
    padding-left: 1rem;
    margin: 1rem 0;
    font-style: italic;
  }

  /* Prose-specific bold text fixes */
  .prose strong,
  .prose b {
    color: rgb(17 24 39) !important; /* gray-900 */
    font-weight: 700 !important;
  }

  .prose em,
  .prose i {
    color: rgb(31 41 55) !important; /* gray-800 */
  }

  .prose a {
    color: rgb(37 99 235) !important; /* blue-600 */
  }

  /* Prose heading fixes */
  .prose h1,
  .prose h2,
  .prose h3,
  .prose h4,
  .prose h5,
  .prose h6 {
    color: rgb(0 0 0) !important; /* black for maximum contrast */
    font-weight: 700 !important;
  }

  /* Override any white text that might be applied */
  .payload-richtext * {
    color: inherit !important;
  }

  .payload-richtext
    *:not(h1):not(h2):not(h3):not(h4):not(h5):not(h6):not(strong):not(b):not(em):not(i):not(a):not(
      code
    ):not(blockquote) {
    color: rgb(31 41 55) !important; /* gray-800 */
  }
}
